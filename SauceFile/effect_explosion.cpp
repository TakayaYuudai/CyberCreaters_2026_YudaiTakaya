//================================================================================================================================================================
//
//3D弾処理[bullet3D.cpp]
//Author : Yuudai Takaya
//
//================================================================================================================================================================

//================================================================================================================================================================
//ライブラリリンク
//================================================================================================================================================================
#include "effect_explosion.h"
#include "billboard.h"
#include "manager.h"

//================================================================================================================================================================
//マクロ定義
//================================================================================================================================================================
#define	BLOCK_WIDE   (50.0f) //3D弾の横半径
#define	BLOCK_HEIGHT (50.0f) //3D弾の縦半径

//================================================================================================================================================================
//グローバル変数
//================================================================================================================================================================

//================================================================================================================================================================
//コンストラクタ
//================================================================================================================================================================
CExplosion_Effect::CExplosion_Effect() :CBillboard(0)
{

}

//================================================================================================================================================================
//デストラクタ
//================================================================================================================================================================
CExplosion_Effect::~CExplosion_Effect()
{

}

//================================================================================================================================================================
//初期設定
//================================================================================================================================================================
HRESULT CExplosion_Effect::Init()
{
    CBillboard::Init();

    SetSize(BLOCK_WIDE, BLOCK_WIDE);

    SetCollar(255, 255, 255, 255);

    m_nLife = 60;

    SetAnimation(3.f,(float)3);

    SetTexture("data\\TEXTURE\\explosion.png");

    return S_OK;
}

//================================================================================================================================================================
//終了処理
//================================================================================================================================================================
void CExplosion_Effect::Uninit()
{
    CBillboard::Uninit();
}

//================================================================================================================================================================
//更新処理（全オブジェクト）
//================================================================================================================================================================
void CExplosion_Effect::Update()
{
    m_nLife --;

    if (m_nLife < 0) {
        Uninit();
    }

    CBillboard::Update();
}

//================================================================================================================================================================
//描画処理（全オブジェクト）
//================================================================================================================================================================
void CExplosion_Effect::Draw()
{
    CBillboard::Draw();
}

//================================================================================================================================================================
// 3D弾生成
//================================================================================================================================================================
CExplosion_Effect* CExplosion_Effect::Create(D3DXVECTOR3 pos)
{
    // エフェクトの新規生成
    CExplosion_Effect* pCExplosion_Effect = new CExplosion_Effect();
    // 初期化
    pCExplosion_Effect->Init();
    // エフェクトの基準位置を設定（プレイヤーの位置を基準）
    pCExplosion_Effect->SetPos(pos.x, pos.y, pos.z);
    return pCExplosion_Effect;
}